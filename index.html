<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Personal Finance Tracker</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Optional chart -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" defer></script>
</head>
<body>
  <header class="container">
    <h1>Personal Finance Tracker</h1>
    <p class="sub">Track income & expenses, filter, export CSV, and visualize.</p>
  </header>

  <main class="container grid">
    <!-- Summary Cards -->
    <section class="cards">
      <div class="card" id="card-income">
        <h3>Total Income</h3>
        <div class="value" id="total-income">0</div>
      </div>
      <div class="card" id="card-expense">
        <h3>Total Expense</h3>
        <div class="value" id="total-expense">0</div>
      </div>
      <div class="card" id="card-balance">
        <h3>Balance</h3>
        <div class="value" id="balance">0</div>
      </div>
    </section>

    <!-- Add Transaction -->
    <section class="panel">
      <h2>Add Transaction</h2>
      <form id="tx-form" class="form">
        <div class="row">
          <label>Type</label>
          <select id="tx-type" required>
            <option value="income">Income</option>
            <option value="expense">Expense</option>
          </select>
        </div>
        <div class="row">
          <label>Amount</label>
          <input id="tx-amount" type="number" step="0.01" min="0" required />
        </div>
        <div class="row">
          <label>Date</label>
          <input id="tx-date" type="date" required />
        </div>
        <div class="row">
          <label>Category</label>
          <select id="tx-category" required></select>
        </div>
        <div class="row">
          <label>Note (optional)</label>
          <input id="tx-note" type="text" placeholder="e.g., Groceries at Tesco" />
        </div>
        <button class="btn" type="submit">Add</button>
      </form>
    </section>

    <!-- Manage Categories -->
    <section class="panel">
      <h2>Categories</h2>
      <form id="cat-form" class="form small">
        <div class="row">
          <label>Name</label>
          <input id="cat-name" type="text" required />
        </div>
        <div class="row">
          <label>Type</label>
          <select id="cat-type" required>
            <option value="income">Income</option>
            <option value="expense">Expense</option>
          </select>
        </div>
        <button class="btn" type="submit">Add Category</button>
      </form>
      <ul id="cat-list" class="cat-list"></ul>
    </section>

    <!-- Filters -->
    <section class="panel">
      <h2>Filters</h2>
      <form id="filter-form" class="form small">
        <div class="row">
          <label>Type</label>
          <select id="f-type">
            <option value="all">All</option>
            <option value="income">Income</option>
            <option value="expense">Expense</option>
          </select>
        </div>
        <div class="row">
          <label>Category</label>
          <select id="f-category">
            <option value="all">All</option>
          </select>
        </div>
        <div class="row">
          <label>Date From</label>
          <input id="f-from" type="date" />
        </div>
        <div class="row">
          <label>Date To</label>
          <input id="f-to" type="date" />
        </div>
        <div class="row">
          <label>Min Amount</label>
          <input id="f-min" type="number" step="0.01" min="0" />
        </div>
        <div class="row">
          <label>Max Amount</label>
          <input id="f-max" type="number" step="0.01" min="0" />
        </div>
        <div class="row">
          <label>Sort</label>
          <select id="f-sort">
            <option value="date_desc">Date ↓</option>
            <option value="date_asc">Date ↑</option>
            <option value="amount_desc">Amount ↓</option>
            <option value="amount_asc">Amount ↑</option>
          </select>
        </div>
        <div class="row actions">
          <button class="btn" type="submit">Apply</button>
          <button class="btn ghost" id="btn-reset" type="button">Reset</button>
          <button class="btn ghost" id="btn-export" type="button">Export CSV</button>
        </div>
      </form>
    </section>

    <!-- Transactions Table -->
    <section class="panel col-span-2">
      <h2>Transactions</h2>
      <div class="table-wrap">
        <table class="table" id="tx-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Type</th>
              <th>Category</th>
              <th class="right">Amount</th>
              <th>Note</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="tx-tbody"></tbody>
        </table>
      </div>
    </section>

    <!-- Chart -->
    <section class="panel col-span-2">
      <h2>Income vs Expense (Filtered)</h2>
      <canvas id="ie-chart" height="120"></canvas>
    </section>
  </main>

  <footer class="container foot">
    <small>Data is stored locally in your browser.</small>
  </footer>

  <script type="module" src="app.js"></script>
</body>
</html>
